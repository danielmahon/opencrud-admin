import { local } from '../graphs';
import { theme } from '../config';

export const types = {
  SIDEBAR: 'Sidebar',
};

export const defaults = {
  // sidebar: {
  //   __typename: types.SIDEBAR,
  //   open: !theme.device.isPhone,
  // },
  sidebar: {},
  resources: [],
};

export const resolvers = {
  Mutation: {
    toggleSidebar: (_, { open }, { cache }) => {
      const { sidebar } = cache.readQuery({ query: local.query.sidebar });
      const data = {
        sidebar: {
          ...sidebar,
          open: open !== undefined ? open : !sidebar.open,
        },
      };
      cache.writeData({ data });
      return null;
    },
  },
};
